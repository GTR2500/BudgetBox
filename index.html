<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>Pagina 1 â€” Anagrafica & Struttura</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="./assets/css/app.css" rel="stylesheet">
</head>
<body>
  <header>
    <div class="container toolbar" style="justify-content:space-between">
      <div class="logo" style="display:flex;align-items:center;gap:10px">
        <img src="https://www.glcgrimaldelli.com/wp-content/uploads/2019/06/Logo-Sottopagine.jpg" alt="Grimaldelli" style="height:28px">
        <h1 id="title" style="margin:0">Preventivi</h1>
      </div>
      <div class="header-right" style="display:flex;gap:10px;align-items:center">
        <div class="rev">Rev <span id="revDate"></span> â€¢ <span id="revVer"></span></div>
        <button id="printBtn" class="btn">Stampa / PDF</button>
        <a class="btn btn-ghost" href="./impostazioni.html" title="Impostazioni">Impostazioni</a>
        <button id="themeBtn" class="btn" title="Tema">ðŸŒ™</button>
      </div>
    </div>
  </header>

  <main class="container" style="padding-bottom:60px">
    <!-- ANAGRAFICA -->
    <section class="card">
      <div class="toolbar" style="justify-content:space-between">
        <h2 style="color:var(--brand)">Anagrafica</h2>
        <span id="badge-meteo" class="badge meta">â€”</span>
      </div>
      <div class="grid-4">
        <label class="fld">
          <span>Cliente</span>
          <input id="cli" placeholder="Ragione sociale">
        </label>
        <label class="fld">
          <span>LocalitÃ </span>
          <select id="fld-localita"></select>
        </label>
        <label class="fld">
          <span>Riferimento</span>
          <input id="rif" placeholder="Es. Rif. interno">
        </label>
        <label class="fld">
          <span>Data</span>
          <input id="dat" type="date">
        </label>
      </div>
    </section>

    <!-- STRUTTURA -->
    <section class="card" style="margin-top:12px">
      <div class="toolbar" style="justify-content:space-between;align-items:flex-start">
        <h2 style="color:var(--brand)">Struttura</h2>
        <div class="toolbar" style="gap:10px;flex-wrap:wrap">
          <span class="small">Stato superficie:</span>
          <span id="badge" class="badge">â€”</span>
          <span class="small">(<span id="badgePct">0%</span>)</span>
          <button id="checkBtn" class="btn">Check superficie</button>
        </div>
      </div>

      <!-- Tipo, forma, prezzi -->
      <div class="grid-4" style="margin-top:8px">
        <label>Tipo di struttura
          <select id="tipoStruttura"></select>
        </label>
        <label>Forma copertura
          <select id="formaCopertura"></select>
          <span id="formaDescr" class="small"></span>
        </label>
        <label>Prezzo struttura (â‚¬/mÂ²)
          <input id="prz" type="number" step="1" min="0">
          <span class="small">Caricato dal tipo; modificabile a mano.</span>
        </label>
        <label>Kg acciaio (kg/mÂ²)
          <input id="kgBase" type="number" step="0.1" min="0">
          <span class="small">Riferimento per il calcolo â‚¬/kg variabile.</span>
        </label>
      </div>

      <!-- Schizzo + pendenza + colmo -->
      <div class="card" style="margin:8px 0;display:flex;align-items:center;gap:12px;flex-wrap:wrap">
        <div id="sketch" aria-label="schizzo struttura"></div>
        <div class="small">
          Rappresentazione schematica della copertura selezionata (indicativa).
          &nbsp;â€¢&nbsp;<b>Pendenza stimata:</b> <span id="pendenzaStimata">0.00</span>% 
          &nbsp;â€¢&nbsp;<b>Altezza colmo:</b> <span id="hColmo">0.00</span> m
        </div>
      </div>

      <!-- Campate, interasse, lunghezza, altezza -->
      <div class="grid-4" style="margin-top:8px">
        <label>N. campate
          <input id="campN" type="number" step="1" min="0" value="0">
        </label>
        <label>Interasse campate (m)
          <input id="campInt" type="number" step="0.01" min="0" value="0">
          <span id="lenNote" class="small"></span>
        </label>
        <label>Lunghezza (m)
          <input id="len" type="number" step="0.01" min="0">
        </label>
        <label>Altezza trave (m)
          <input id="hTrave" type="number" step="0.01" min="0" value="0">
        </label>
      </div>

      <!-- Larghezza e sporti unificati -->
      <div class="grid-4" style="margin-top:8px">
        <label>Larghezza (m)
          <input id="wid" type="number" step="0.01" min="0">
        </label>
        <label>Sporto testata (m) â€” fronte/retro
          <input id="spTest" type="number" step="0.01" min="0" value="0">
        </label>
        <label>Sporto gronda (m) â€” sx/dx
          <input id="spGr" type="number" step="0.01" min="0" value="0">
        </label>
        <label></label>
      </div>

      <!-- Decubito -->
      <div class="grid-4" style="margin-top:8px">
        <label>Quota area di decubito (%)
          <input id="quo" type="number" step="1" min="0" max="100">
          <span class="small">
            Percentuale dellâ€™<b>area lorda interna</b> destinata alle aree di riposo/stallo (lettiera, box, cuccette).<br>
            <b>Superficie di decubito</b> = Area lorda interna Ã— Quota / 100.
          </span>
        </label>
        <div></div><div></div><div></div>
      </div>

      <!-- Riepiloghi aree -->
      <div class="grid-4" style="margin-top:12px">
        <div class="card"><div class="small">Area lorda interna</div><div class="value"><span id="areaLorda">0.0</span> mÂ²</div></div>
        <div class="card"><div class="small">Copertura in pianta (sporti inclusi)</div><div class="value"><span id="areaCoperta">0.0</span> mÂ²</div></div>
        <div class="card"><div class="small">Copertura in falda</div><div class="value"><span id="areaFalda">0.0</span> mÂ²</div></div>
        <div class="card"><div class="small">Area normativa richiesta</div><div class="value"><span id="areaNormativa">0.0</span> mÂ²</div></div>
      </div>

      <!-- Costi -->
      <div class="grid-4" style="margin-top:12px">
        <div class="card"><div class="small">Costo â‚¬/mÂ² (tipo)</div><div class="value"><span id="costoMq">â€”</span></div></div>
        <div class="card"><div class="small">Costo acciaio (â‚¬/kg variabile)</div><div class="value"><span id="costoKg">â€”</span></div></div>
        <div class="card"><div class="small">Neve e vento</div><div class="value"><span id="extraMeteo">â€”</span></div></div>
        <div class="card"><div class="small">Costo struttura</div><div class="value"><span id="costoStruttura">â€”</span></div></div>
      </div>

      <label style="margin-top:12px">Note
        <input id="not" placeholder="Struttura metallica zincata, copertura sandwich 40 mm">
      </label>
    </section>

    <!-- POPOLAZIONI & STABULAZIONI (come prima) -->
    <section class="card" style="margin-top:12px">
      <h2 style="color:var(--brand)">Popolazioni &amp; stabulazioni</h2>

      <div class="grid-2" style="margin-top:8px">
        <div class="specie card">
          <div class="toolbar" style="justify-content:space-between"><h3>Bovine adulte</h3></div>
          <div class="grid-2">
            <label>N. capi <input id="n-bovineAdulte" type="number" min="0"></label>
            <label>Stabulazione <select id="s-bovineAdulte"></select></label>
            <label>Livello <select id="l-bovineAdulte"></select></label>
          </div>
          <div class="small">Valore unitario: <span id="vu-bovineAdulte">0.00</span> mÂ²/capo</div>
        </div>

        <div class="specie card">
          <div class="toolbar" style="justify-content:space-between"><h3>Tori da rimonta</h3></div>
          <div class="grid-2">
            <label>N. capi <input id="n-toriRimonta" type="number" min="0"></label>
            <label>Stabulazione <select id="s-toriRimonta"></select></label>
            <label>Livello <select id="l-toriRimonta"></select></label>
          </div>
          <div class="small">Valore unitario: <span id="vu-toriRimonta">0.00</span> mÂ²/capo</div>
        </div>

        <div class="specie card">
          <div class="toolbar" style="justify-content:space-between"><h3>Bufale al parto</h3></div>
          <div class="grid-2">
            <label>N. capi <input id="n-bufaleParto" type="number" min="0"></label>
            <label>Stabulazione <select id="s-bufaleParto"></select></label>
            <label>Livello <select id="l-bufaleParto"></select></label>
          </div>
          <div class="small">Valore unitario: <span id="vu-bufaleParto">0.00</span> mÂ²/capo</div>
        </div>

        <div class="specie card">
          <div class="toolbar" style="justify-content:space-between"><h3>Manze bovine</h3></div>
          <div class="grid-2">
            <label>N. capi <input id="n-manzeBovine" type="number" min="0"></label>
            <label>Stabulazione <select id="s-manzeBovine"></select></label>
            <label>Livello <select id="l-manzeBovine"></select></label>
          </div>
          <div class="small">Valore unitario: <span id="vu-manzeBovine">0.00</span> mÂ²/capo</div>
        </div>

        <div class="specie card">
          <div class="toolbar" style="justify-content:space-between"><h3>Bufale adulte</h3></div>
          <div class="grid-2">
            <label>N. capi <input id="n-bufaleAdulte" type="number" min="0"></label>
            <label>Stabulazione <select id="s-bufaleAdulte"></select></label>
            <label>Livello <select id="l-bufaleAdulte"></select></label>
          </div>
          <div class="small">Valore unitario: <span id="vu-bufaleAdulte">0.00</span> mÂ²/capo</div>
        </div>

        <div class="specie card">
          <div class="toolbar" style="justify-content:space-between"><h3>Manze bufaline</h3></div>
          <div class="grid-2">
            <label>N. capi <input id="n-manzeBufaline" type="number" min="0"></label>
            <label>Stabulazione <select id="s-manzeBufaline"></select></label>
            <label>Livello <select id="l-manzeBufaline"></select></label>
          </div>
          <div class="small">Valore unitario: <span id="vu-manzebufaline">0.00</span> mÂ²/capo</div>
        </div>
      </div>

      <div class="card" style="margin-top:12px">
        <h3>Bovini da ingrasso</h3>
        <div class="grid-4">
          <label>N. gruppi <input id="ing-gr" type="number" min="0"></label>
          <label>Capi per gruppo <input id="ing-cpg" type="number" min="0"></label>
          <label>Peso medio (kg) <input id="ing-peso" type="number" min="0" value="550"></label>
          <label>Livello
            <select id="ing-liv"><option>Adeguato</option><option>Modesto</option><option>Ottimo</option></select>
          </label>
        </div>
        <div class="small" style="margin-top:6px">Valori unitari stimati: min 3.25 â€“ adeg 4.25 â€“ opt 5.25 mÂ²/capo</div>
      </div>
    </section>

    <div class="toolbar" style="margin-top:12px;justify-content:flex-end">
      <button id="btn-next" class="btn" disabled>Prosegui alla pagina 2</button>
    </div>
  </main>

  <footer>Â© <span id="titleFooter"></span> per Grimaldelli s.r.l. â€” Manuel Zago</footer>

  <script src="./assets/js/core.js"></script>
  <script>
    document.documentElement.setAttribute("data-theme","light");
    window.PreventivoApp.initPagina1();
  </script>
</body>
</html>
