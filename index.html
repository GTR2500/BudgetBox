<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BudgetBox</title>
  <link rel="stylesheet" href="assets/css/app.css" />
</head>
<body>
  <div class="page">
    <!-- HEADER -->
    <header class="header">
      <div class="header-left">
        <img class="logo" src="https://www.glcgrimaldelli.com/wp-content/uploads/2019/06/Logo-Sottopagine.jpg" alt="Grimaldelli" />
        <h1 id="title">BudgetBox</h1>
      </div>
      <div class="header-right">
        <span class="rev badge">Rev <span id="revDate">—</span> • <span id="revVer">—</span></span>
        <button id="printBtn" class="btn">Stampa / PDF</button>
        <a href="impostazioni.html" class="btn ghost">Impostazioni</a>
        <button id="themeBtn" class="btn ghost" title="Tema">🌙</button>
      </div>
    </header>

    <!-- ANAGRAFICA -->
    <section class="section">
      <div class="section-title">Anagrafica</div>

      <div class="row">
        <label class="field col-12">
          <div class="lbl">Dati meteo:</div>
          <div id="badge-meteo" class="badge meta"></div>
        </label>
      </div>

      <div class="row">
        <label class="field col-4">
          <div class="lbl">Cliente</div>
          <input id="cli" type="text" placeholder="Ragione sociale / nominativo" />
        </label>

        <label class="field col-4">
          <div class="lbl">Località</div>
          <select id="fld-localita">
            <option value="">— Seleziona località —</option>
          </select>
        </label>

        <label class="field col-2">
          <div class="lbl">Riferimento</div>
          <input id="rif" type="text" placeholder="Rif. interno" />
        </label>

        <label class="field col-2">
          <div class="lbl">Data</div>
          <input id="dat" type="date" />
        </label>
      </div>
    </section>

    <!-- STRUTTURA (versione semplice “stamattina”) -->
    <section class="section">
      <div class="section-title with-tools">
        <span>Struttura</span>
        <div class="tools">
          <span id="badge" class="badge">—</span>
          <span id="badgePct" class="pct">(0%)</span>
          <button id="checkBtn" class="btn ghost">Check superficie</button>
        </div>
      </div>

      <div class="row">
        <label class="field col-3">
          <div class="lbl">Lunghezza (m)</div>
          <input id="len" type="number" step="0.01" value="60" />
        </label>
        <label class="field col-3">
          <div class="lbl">Larghezza (m)</div>
          <input id="wid" type="number" step="0.01" value="25" />
        </label>
        <label class="field col-3">
          <div class="lbl">Quota area di decubito (%)</div>
          <input id="quo" type="number" step="1" value="70" />
        </label>
        <label class="field col-3">
          <div class="lbl">Prezzo struttura (€/m²)</div>
          <input id="prz_m2" type="number" step="0.01" value="180" />
        </label>
      </div>

      <div class="row kpis">
        <div class="kpi col-3">
          <div class="kpi-lbl">Area lorda</div>
          <div class="kpi-val"><span id="areaLorda">—</span> m²</div>
        </div>
        <div class="kpi col-3">
          <div class="kpi-lbl">Area decubito (reale)</div>
          <div class="kpi-val"><span id="areaDecubito">—</span> m²</div>
        </div>
        <div class="kpi col-3">
          <div class="kpi-lbl">Area normativa richiesta</div>
          <div class="kpi-val"><span id="areaNormativa">—</span> m²</div>
        </div>
        <div class="kpi col-3">
          <div class="kpi-lbl">Costo struttura</div>
          <div class="kpi-val"><span id="costoStruttura">—</span></div>
        </div>
      </div>

      <label class="field">
        <div class="lbl">Note</div>
        <input id="not" type="text" value="Struttura metallica zincata, copertura sandwich 40 mm" />
      </label>
    </section>

    <!-- POPOLAZIONI & STABULAZIONI -->
    <section class="section">
      <div class="section-title">Popolazioni & stabulazioni</div>

      <div class="cards">
        <!-- Bovine adulte -->
        <div class="card">
          <div class="card-title">
            <span>Bovine adulte</span>
            <span id="cap-bovineAdulte" class="badge">0 capi</span>
          </div>
          <div class="row">
            <label class="field col-4">
              <div class="lbl">N. capi</div>
              <input id="n-bovineAdulte" type="number" step="1" />
            </label>
            <label class="field col-4">
              <div class="lbl">Stabulazione</div>
              <select id="s-bovineAdulte"></select>
            </label>
            <label class="field col-4">
              <div class="lbl">Livello</div>
              <select id="l-bovineAdulte">
                <option>Adeguato</option>
                <option>Ottimale</option>
              </select>
            </label>
          </div>
          <div class="hint">Valore unitario: <span id="vu-bovineAdulte">—</span> m²/capo</div>
        </div>

        <!-- Manze bovine -->
        <div class="card">
          <div class="card-title">
            <span>Manze bovine</span>
            <span id="cap-manzeBovine" class="badge">0 capi</span>
          </div>
          <div class="row">
            <label class="field col-4">
              <div class="lbl">N. capi</div>
              <input id="n-manzeBovine" type="number" step="1" />
            </label>
            <label class="field col-4">
              <div class="lbl">Stabulazione</div>
              <select id="s-manzeBovine"></select>
            </label>
            <label class="field col-4">
              <div class="lbl">Livello</div>
              <select id="l-manzeBovine">
                <option>Adeguato</option>
                <option>Ottimale</option>
              </select>
            </label>
          </div>
          <div class="hint">Valore unitario: <span id="vu-manzeBovine">—</span> m²/capo</div>
        </div>

        <!-- Tori di rimonta -->
        <div class="card">
          <div class="card-title">
            <span>Tori da rimonta</span>
            <span id="cap-toriRimonta" class="badge">0 capi</span>
          </div>
          <div class="row">
            <label class="field col-4">
              <div class="lbl">N. capi</div>
              <input id="n-toriRimonta" type="number" step="1" />
            </label>
            <label class="field col-4">
              <div class="lbl">Stabulazione</div>
              <select id="s-toriRimonta"></select>
            </label>
            <label class="field col-4">
              <div class="lbl">Livello</div>
              <select id="l-toriRimonta">
                <option>Adeguato</option>
                <option>Ottimale</option>
              </select>
            </label>
          </div>
          <div class="hint">Valore unitario: <span id="vu-toriRimonta">—</span> m²/capo</div>
        </div>

        <!-- Bufale al parto -->
        <div class="card">
          <div class="card-title">
            <span>Bufale al parto</span>
            <span id="cap-bufaleParto" class="badge">0 capi</span>
          </div>
          <div class="row">
            <label class="field col-4">
              <div class="lbl">N. capi</div>
              <input id="n-bufaleParto" type="number" step="1" />
            </label>
            <label class="field col-4">
              <div class="lbl">Stabulazione</div>
              <select id="s-bufaleParto"></select>
            </label>
            <label class="field col-4">
              <div class="lbl">Livello</div>
              <select id="l-bufaleParto">
                <option>Adeguato</option>
                <option>Ottimale</option>
              </select>
            </label>
          </div>
          <div class="hint">Valore unitario: <span id="vu-bufaleParto">—</span> m²/capo</div>
        </div>

        <!-- Bufale adulte -->
        <div class="card">
          <div class="card-title">
            <span>Bufale adulte</span>
            <span id="cap-bufaleAdulte" class="badge">0 capi</span>
          </div>
          <div class="row">
            <label class="field col-4">
              <div class="lbl">N. capi</div>
              <input id="n-bufaleAdulte" type="number" step="1" />
            </label>
            <label class="field col-4">
              <div class="lbl">Stabulazione</div>
              <select id="s-bufaleAdulte"></select>
            </label>
            <label class="field col-4">
              <div class="lbl">Livello</div>
              <select id="l-bufaleAdulte">
                <option>Adeguato</option>
                <option>Ottimale</option>
              </select>
            </label>
          </div>
          <div class="hint">Valore unitario: <span id="vu-bufaleAdulte">—</span> m²/capo</div>
        </div>

        <!-- Manze bufaline -->
        <div class="card">
          <div class="card-title">
            <span>Manze bufaline</span>
            <span id="cap-manzeBufaline" class="badge">0 capi</span>
          </div>
          <div class="row">
            <label class="field col-4">
              <div class="lbl">N. capi</div>
              <input id="n-manzeBufaline" type="number" step="1" />
            </label>
            <label class="field col-4">
              <div class="lbl">Stabulazione</div>
              <select id="s-manzeBufaline"></select>
            </label>
            <label class="field col-4">
              <div class="lbl">Livello</div>
              <select id="l-manzeBufaline">
                <option>Adeguato</option>
                <option>Ottimale</option>
              </select>
            </label>
          </div>
          <div class="hint">Valore unitario: <span id="vu-manzebufaline">—</span> m²/capo</div>
        </div>
      </div>

      <!-- Ingrasso -->
      <div class="card">
        <div class="card-title">
          <span>Bovini da ingrasso</span>
          <span id="cap-ingrasso" class="badge">0 capi</span>
        </div>
        <div class="row">
          <label class="field col-3">
            <div class="lbl">N. gruppi</div>
            <input id="ing-gr" type="number" step="1" />
          </label>
          <label class="field col-3">
            <div class="lbl">Capi per gruppo</div>
            <input id="ing-cpg" type="number" step="1" />
          </label>
          <label class="field col-3">
            <div class="lbl">Peso medio (kg)</div>
            <input id="ing-peso" type="number" step="1" value="550" />
          </label>
          <label class="field col-3">
            <div class="lbl">Livello</div>
            <select id="ing-liv">
              <option>Adeguato</option>
              <option>Ottimale</option>
            </select>
          </label>
        </div>
        <div class="hint">Valori unitari stimati: min 3.25 — adeg 4.25 — opt 5.25 m²/capo</div>
      </div>

      <div class="right">
        <button id="btn-next" class="btn primary">Prosegui alla pagina 2</button>
      </div>
    </section>

    <footer class="footer">
      © <span id="titleFooter">BudgetBox</span> per Grimaldelli s.r.l. — Manuel Zago
    </footer>
  </div>

  <script src="assets/js/core.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      if (window.PreventivoApp && PreventivoApp.initPagina1) {
        PreventivoApp.initPagina1();
      }
    });
  </script>
</body>
</html>
